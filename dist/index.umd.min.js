!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).Utils=n()}(this,function(){"use strict";var o=null;try{o=("undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof __non_webpack_require__&&__non_webpack_require__("worker_threads")||"function"==typeof require&&require("worker_threads")).Worker}catch(e){}function e(e,n,r){var n=void 0===n?null:n,e=(r=void 0!==r&&r,Buffer.from(e,"base64").toString(r?"utf16":"utf8")),r=e.indexOf("\n",10)+1,t=e.substring(r)+(n?"//# sourceMappingURL="+n:"");return function(e){return new o(t,Object.assign({},e,{eval:!0}))}}function n(e,n,r){n=void 0===n?null:n,e=function(e,n){var r=atob(e);if(n){for(var t=new Uint8Array(r.length),o=0,i=r.length;o<i;++o)t[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(t.buffer))}return r}(e,void 0!==r&&r),r=e.indexOf("\n",10)+1,e=e.substring(r)+(n?"//# sourceMappingURL="+n:""),r=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(r)}var r="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);i=null,u=!(t="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y29uc3QgZT17YWRkOmZ1bmN0aW9uKC4uLm8pe2xldCBlPTA7Zm9yKGxldCBuPTAsdD1vLmxlbmd0aDtuPHQ7bisrKWUrPW9bbl07cmV0dXJuIGV9LHN1YjpmdW5jdGlvbiguLi5vKXtsZXQgZT1vWzBdO2ZvcihsZXQgbj0xLHQ9by5sZW5ndGg7bjx0O24rKyllLT1vW25dO3JldHVybiBlfX07b25tZXNzYWdlPW49Pnt2YXJ7YWN0aW9uOm4scGFyYW06dCxfc2lnbjpvfT1uLmRhdGE7ImZ1bmN0aW9uIj09dHlwZW9mIGVbbl0/KHQ9e2FjdGlvbjpuLHJlc3VsdDplW25dKC4uLm51bGwhPXQ/dDpbXSksX3NpZ246b30scG9zdE1lc3NhZ2UodCkpOmNvbnNvbGUubG9nKGBhY3Rpb24gJHtufSBub3QgZm91bmRgKX19KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtlclV0aWxzLmpzLm1hcAoK");var t,i,u,a,d,l,s,c=r?e(t,i,u):(a=t,d=i,l=u,function(e){return s=s||n(a,d,l),new Worker(s,e)}),r=Math.max(window.navigator.hardwareConcurrency-1,1);const f=new Map,b=[],p=new Array(r).fill(null).map((e,n)=>({index:n,worker:new c,idle:!0}));function g(){let e=null;var n;b.length&&(e=p.find(e=>e.idle))&&(e.idle=!1,n=b.shift(),f.set(n._sign,n.p),e.worker.postMessage(Object.assign(Object.assign({},n.job),{_sign:n._sign})))}return p.map(n=>{n.worker.addEventListener("message",e=>{e.data&&e.data._sign?(f.get(e.data._sign).resolve(e.data.result),f.delete(e.data._sign),n.idle=!0,g()):(console.error("worker 返回数据错误"),f.get(e.data._sign).reject("worker 返回数据错误"))})}),{add:function(...r){let t=0;for(let e=0,n=r.length;e<n;e++)t+=r[e];return t},sub:function(...r){let t=r[0];for(let e=1,n=r.length;e<n;e++)t-=r[e];return t},worker:new Proxy({},{get(e,o){return function(...t){return new Promise((e,n)=>{var r=Date.now()*Math.random();b.push({_sign:r,job:{action:o,param:t},p:{resolve:e,reject:n}}),g()})}}})}});
